<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Layanan</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #000;
            --text-color: #e0e0e0;
            --header-bg: #000;
            --card-bg: rgba(20, 20, 20, 0.7);
            --border-color: rgba(138, 43, 226, 0.3);
            --primary-glow: #8A2BE2; /* Ungu */
            --secondary-glow: #4169E1; /* Biru */
            --input-bg: #222;
            --input-border: #444;
            --input-text: #fff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
        }
        
        /* Header */
        .top-header {
            position: fixed; top: 0; left: 0; width: 100%;
            background-color: var(--header-bg);
            height: 60px;
            z-index: 1001;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .header-brand {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--text-color);
            text-shadow: 0 0 8px var(--primary-glow);
        }
        
        /* Konten Utama */
        .main-content { padding: 80px 15px 110px 15px; width: 100%; }
        .page-content { display: none; }
        .page-content.active { display: block; }
        
        /* Navigasi Bawah */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background-color: var(--header-bg); padding: 15px 10px 10px 10px; border-top: 1px solid var(--border-color); z-index: 1000; }
        .bottom-nav-buttons { display: flex; justify-content: space-around; gap: 10px; }
        .nav-button {
            flex-grow: 1; text-decoration: none; color: var(--text-color); background: transparent; padding: 12px 15px;
            text-align: center; font-weight: 600; font-size: 0.85rem; border: 2px solid var(--primary-glow);
            border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
            outline: none; -webkit-tap-highlight-color: transparent;
        }
        .nav-button:hover, .nav-button.active, .nav-button:focus {
            background-color: rgba(138, 43, 226, 0.2);
            box-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--secondary-glow);
        }
        .footer-copyright { text-align: center; font-size: 0.8rem; color: #777; padding-top: 12px; }
        
        /* --- CSS Loader dan Cek Kuota --- */
        .loader { display: none; width: 40px; height: 40px; margin: auto; margin-top: 20px; border: 4px solid rgba(128,128,128,0.2); border-left-color: var(--primary-glow); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .page-title { font-size: 2rem; font-weight: 600; margin-bottom: 30px; color: var(--text-color); text-shadow: 0 0 10px var(--primary-glow); text-align: center; }
        #phoneNumber, #areaSearchInput { width: 100%; padding: 18px 25px; font-size: 1.1rem; border-radius: 50px; border: 2px solid var(--input-border); background-color: var(--input-bg); color: var(--input-text); text-align: center; transition: all 0.3s ease; margin-bottom: 20px; }
        #phoneNumber:focus, #areaSearchInput:focus { outline: none; border-color: var(--primary-glow); box-shadow: 0 0 10px var(--primary-glow); }
        #cek-kuota-submit-btn {
            width: 100%; padding: 15px 20px; font-size: 1rem; font-weight: 600; border: 2px solid var(--primary-glow);
            border-radius: 50px; background: transparent; color: var(--text-color); cursor: pointer; transition: all 0.3s ease;
            outline: none; -webkit-tap-highlight-color: transparent;
        }
        #cek-kuota-submit-btn:hover, #cek-kuota-submit-btn:focus { background-color: rgba(138, 43, 226, 0.2); box-shadow: 0 0 10px var(--primary-glow); }
        #kuota-wrapper { margin-top: 20px; text-align: left; }
        .info-box, .paket { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; margin-top: 20px; box-shadow: 0 1px 6px rgba(0, 0, 0, 0.1); }
        .info-title, .paket-title { font-size: 16px; font-weight: 600; margin-bottom: 10px; color: var(--text-color); }
        .info-line { margin-bottom: 8px; font-size: 0.9rem; }
        .kuota-item { margin-bottom: 12px; }
        .kuota-label { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 4px; }
        .bar { height: 6px; background-color: rgba(128,128,128,0.2); border-radius: 3px; overflow: hidden; }
        .bar-fill { height: 100%; background: linear-gradient(90deg, var(--secondary-glow), var(--primary-glow)); transition: width 0.5s ease; }
        .reset-info { font-size: 13px; color: #aaa; margin-top: 10px; }
        .action-buttons { display: flex; gap: 10px; margin-top: 20px; }
        .action-button {
            flex: 1; padding: 10px; font-weight: 600; background-color: var(--input-bg); border: 1px solid var(--border-color);
            color: var(--text-color); border-radius: 8px; cursor: pointer; transition: background-color 0.2s;
            outline: none; -webkit-tap-highlight-color: transparent;
        }
        .action-button:hover, .action-button:focus { background-color: #333; box-shadow: 0 0 8px var(--primary-glow); }

        /* --- CSS Cek Area --- */
        #cek-area table { width: 100%; border-collapse: separate; border-spacing: 0 8px; margin-top: 20px; }
        #cek-area th, #cek-area td { padding: 15px; text-align: left; }
        #cek-area th { color: var(--primary-glow); text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px; border-bottom: 2px solid var(--primary-glow); }
        #cek-area tr { background-color: var(--card-bg); transition: background-color 0.2s; }
        #cek-area tr:hover { background-color: #1a1a1a; }
        #cek-area td { border: 1px solid transparent; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); }
        #cek-area tr td:first-child { border-left: 1px solid var(--border-color); border-top-left-radius: 12px; border-bottom-left-radius: 12px; }
        #cek-area tr td:last-child { border-right: 1px solid var(--border-color); border-top-right-radius: 12px; border-bottom-right-radius: 12px; text-align: center; font-weight: 600; font-size: 1.2rem; }
        #cek-area .highlight { background-color: rgba(138, 43, 226, 0.3); color: white; font-weight: bold; border-radius: 3px; padding: 2px 4px; }
    </style>
</head>
<body>

    <header class="top-header">
        <div class="header-brand">MANG X STORE</div>
    </header>
    
    <main class="main-content">
        <div id="cek-kuota" class="page-content">
            <h2 class='page-title'>Cek Kuota Sidompul</h2>
            <div class='kuota-form'>
                <input id='phoneNumber' placeholder='Contoh: 08770000xxxx' type='tel' />
                <button id='cek-kuota-submit-btn'>Cek Kuota</button>
            </div>
            <div id='loading-ico' class='loader'></div>
            <div id='kuota-wrapper'></div>
        </div>
        
        <div id="cek-area" class="page-content">
            <h2 class='page-title'>Cek Area Akrab</h2>
            <input type="text" id="areaSearchInput" placeholder="Cari Provinsi atau Kabupaten/Kota...">
            <table id="areaDataTable">
                <thead>
                    <tr><th>Provinsi</th><th>Kabupaten/Kota</th><th>Area</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </main>

    <footer class="bottom-nav">
        <div>
            <div class="bottom-nav-buttons">
                <button class="nav-button active" data-page="cek-kuota">CEK KUOTA</button>
                <button class="nav-button" data-page="cek-area">CEK AREA</button>
            </div>
            <div class="footer-copyright">Â© MANG X STORE 2025</div>
        </div>
    </footer>

    <script>
        // --- LOGIKA PINDAH HALAMAN ---
        const pageLinks = document.querySelectorAll('[data-page]');
        const pageContents = document.querySelectorAll('.page-content');
        function switchPage(pageId) {
             pageContents.forEach(page => page.classList.remove('active'));
             const targetPage = document.getElementById(pageId);
             if (targetPage) targetPage.classList.add('active');
             pageLinks.forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-page') === pageId);
             });
        }
        pageLinks.forEach(link => { link.addEventListener('click', () => { switchPage(link.getAttribute('data-page')); }); });
        switchPage('cek-kuota');

        // --- SKRIP CEK KUOTA ---
        document.getElementById('cek-kuota-submit-btn').addEventListener('click', () => {
            const numberInput = document.getElementById('phoneNumber');
            const number = numberInput.value.trim();
            const wrapper = document.getElementById('kuota-wrapper');
            const loader = document.getElementById('loading-ico');

            if (number.length < 10) { alert('Masukkan nomor yang valid.'); return; }
            wrapper.innerHTML = '';
            loader.style.display = 'block';

            const apiUrl = atob("aHR0cHM6Ly9zaWRvbXB1bC5oaWphdWJpcnUubXkuaWQvYmFja2VuZC5waHA=");

            fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'check_package', device_id: 'fake-device-id', number: number })
            }).then(res => res.json()).then(res => {
                loader.style.display = 'none';
                wrapper.innerHTML = '';
                if (res.success && res.data) {
                    const d = res.data;
                    const infoDiv = document.createElement('div');
                    infoDiv.className = 'info-box';
                    infoDiv.innerHTML = `<div class="info-title">Informasi Kartu</div><div class="info-line"><strong>Nomor:</strong> ${number}</div><div class="info-line"><strong>Provider:</strong> ${d.prefix?.value || 'N/A'}</div><div class="info-line"><strong>Registrasi KTP:</strong> ${d.dukcapil?.value || 'N/A'}</div><div class="info-line"><strong>Jaringan:</strong> ${d.status_4g?.value || 'N/A'}</div><div class="info-line"><strong>Umur Kartu:</strong> ${d.active_card?.value || 'N/A'}</div><div class="info-line"><strong>Aktif Sampai:</strong> ${d.active_period?.value || 'N/A'}</div><div class="info-line"><strong>Masa Tenggang:</strong> ${d.grace_period?.value || 'N/A'}</div>`;
                    wrapper.appendChild(infoDiv);

                    if (d.quotas?.success && Array.isArray(d.quotas.value) && d.quotas.value.length > 0) {
                        d.quotas.value.forEach(pkg => {
                            const pkgDiv = document.createElement('div');
                            pkgDiv.className = 'paket';
                            let detailHtml = `<div class="paket-title">${pkg.name}</div>`;
                            pkg.detail_quota.forEach(q => {
                                let percent = parseFloat(q.percent) || 0;
                                detailHtml += `<div class="kuota-item"><div class="kuota-label"><span>${q.name}</span><span>${q.remaining_text} / ${q.total_text}</span></div><div class="bar"><div class="bar-fill" style="width:${percent}%;"></div></div></div>`;
                            });
                            detailHtml += `<div class="reset-info">Reset Kuota: ${pkg.date_end} 23:59 WIB</div>`;
                            pkgDiv.innerHTML = detailHtml;
                            wrapper.appendChild(pkgDiv);
                        });
                    } else {
                         const noQuotaDiv = document.createElement('div');
                         noQuotaDiv.className = 'info-box';
                         noQuotaDiv.innerHTML = `<p>Tidak ada detail paket kuota yang ditemukan.</p>`;
                         wrapper.appendChild(noQuotaDiv);
                    }
                    
                    const actionDiv = document.createElement('div');
                    actionDiv.className = 'action-buttons';
                    
                    const screenshotBtn = document.createElement('button');
                    screenshotBtn.className = 'action-button';
                    screenshotBtn.innerHTML = '<i class="fa-solid fa-camera"></i> UNDUH HASIL CEK KOUTA';
                    screenshotBtn.onclick = () => {
                        screenshotBtn.textContent = 'Memproses...';
                        actionDiv.style.display = 'none';

                        const ssHeader = document.createElement('div');
                        ssHeader.textContent = 'MANG X STORE';
                        ssHeader.style.textAlign = 'center';
                        ssHeader.style.fontWeight = '600';
                        ssHeader.style.fontSize = '1.2rem';
                        ssHeader.style.padding = '20px';
                        ssHeader.style.color = 'var(--text-color)';
                        
                        const ssFooter = document.createElement('div');
                        ssFooter.textContent = 'Â© MANG X STORE 2025';
                        ssFooter.style.textAlign = 'center';
                        ssFooter.style.fontSize = '0.8rem';
                        ssFooter.style.padding = '20px';
                        ssFooter.style.color = '#777';

                        wrapper.prepend(ssHeader);
                        wrapper.appendChild(ssFooter);

                        html2canvas(wrapper, { backgroundColor: '#000' }).then(canvas => {
                            wrapper.removeChild(ssHeader);
                            wrapper.removeChild(ssFooter);
                            actionDiv.style.display = 'flex';

                            const link = document.createElement('a');
                            link.download = `hasil-cek-kuota-${number}.png`;
                            link.href = canvas.toDataURL('image/png');
                            link.click();
                            screenshotBtn.innerHTML = '<i class="fa-solid fa-camera"></i> UNDUH HASIL CEK KOUTA';
                        });
                    };

                    actionDiv.appendChild(screenshotBtn);
                    wrapper.appendChild(actionDiv);

                } else {
                    alert(res.message || 'Gagal mengambil data kuota.');
                }
                // Hapus nomor di input setelah berhasil
                numberInput.value = '';
            }).catch((error) => {
                console.error("Error:", error);
                alert('Gagal cek kuota, terjadi kesalahan. Silakan coba lagi.');
                loader.style.display = 'none';
            });
        });
        document.getElementById('phoneNumber').addEventListener('input', e => { e.target.value = e.target.value.replace(/[^0-9]/g, ''); });

        // --- SKRIP CEK AREA LENGKAP ---
        const areaDataRaw = [{"prov":"Banten","kota":"Kota Tangerang Selatan, Kota Tangerang, Kab. Tangerang, Kab. Pandeglang, Kab. Lebak, Kab. Serang, Kota Serang, Kota Cilegon","area":2},{"prov":"DI Yogyakarta","kota":"Kab. Kulon Progo, Kota Yogyakarta, Kab. Sleman, Kab. Bantul, Kab. Gunungkidul","area":1},{"prov":"DKI Jakarta","kota":"Kota Jakarta Pusat, Kota Jakarta Selatan, Kota Jakarta Barat, Kota Jakarta Timur, Kota Jakarta Utara","area":2},{"prov":"DKI Jakarta","kota":"Kab. Kepulauan Seribu","area":3},{"prov":"Jawa Barat","kota":"Kab. Bandung, Kab. Kuningan, Kab. Purwakarta, Kota Bandung","area":1},{"prov":"Jawa Barat","kota":"Kab. Bandung Barat, Kota Cimahi, Kab. Cirebon, Kota Cirebon, Kab. Indramayu, Kab. Subang","area":2},{"prov":"Jawa Barat","kota":"Kab. Bogor, Kota Bogor, Kota Depok, Kota Bekasi, Kota Banjar, Kab. Ciamis, Kota Tasikmalaya, Kab. Majalengka, Kab. Sumedang, Kab. Bekasi, Kab. Tasikmalaya, Kab. Garut","area":3},{"prov":"Jawa Barat","kota":"Kab. Cianjur, Kab. Pangandaran, Kab. Karawang, Kota Sukabumi, Kab. Sukabumi","area":4},{"prov":"Jawa Tengah","kota":"Kab. Tegal, Kota Surakarta, Kota Tegal, Kab. Brebes, Kab. Kebumen, Kab. Pemalang, Kota Semarang","area":2},{"prov":"Jawa Tengah","kota":"Kab. Boyolali, Kota Salatiga, Kab. Semarang, Kab. Cilacap, Kab. Grobogan, Kab. Kendal, Kab. Rembang","area":3},{"prov":"Jawa Tengah","kota":"Kota Pekalongan, Kab. Pekalongan, Kab. Batang, Kab. Purbalingga, Kab. Kudus, Kab. Sukoharjo, Kab. Klaten, Kota Magelang, Kab. Banyumas, Kab. Magelang, Kab. Temanggung, Kab. Sragen, Kab. Banjarnegara, Kab. Karanganyar, Kab. Wonosobo, Kab. Jepara, Kab. Demak, Kab. Purworejo, Kab. Blora, Kab. Wonogiri, Kab. Pati","area":4},{"prov":"Jawa Timur","kota":"Kota Probolinggo, Kab. Bangkalan, Kab. Sidoarjo, Kab. Banyuwangi, Kota Surabaya, Kab. Sampang, Kab. Pamekasan, Kab. Sumenep, Kab. Pacitan","area":2},{"prov":"Jawa Timur","kota":"Kab. Lumajang, Kab. Probolinggo","area":3},{"prov":"Jawa Timur","kota":"Kab. Jombang, Kota Blitar, Kab. Blitar, Kota Kediri, Kab. Lamongan, Kab. Kediri, Kab. Ngawi, Kab. Mojokerto, Kota Mojokerto, Kab. Magetan, Kab. Gresik, Kab. Tulungagung, Kab. Nganjuk, Kab. Pasuruan, Kota Pasuruan, Kab. Bojonegoro, Kab. Madiun, Kab. Bondowoso, Kab. Tuban, Kota Madiun, Kab. Situbondo, Kab. Jember, Kota Malang, Kab. Malang, Kab. Ponorogo, Kota Batu, Kab. Trenggalek","area":4},{"prov":"Bengkulu","kota":"Kab. Seluma","area":3},{"prov":"Bengkulu","kota":"Kab. Bengkulu Selatan, Kab. Kaur, Kab. Lebong, Kab. Rejang Lebong, Kab. Bengkulu Tengah, Kota Bengkulu, Kab. Bengkulu Utara, Kab. Kepahiang, Kab. Muko Muko","area":4},{"prov":"Jambi","kota":"Kab. Batanghari, Kota Jambi, Kab. Tanjung Jabung Barat, Kab. Muaro Jambi, Kab. Sarolangun","area":3},{"prov":"Jambi","kota":"Kab. Tanjung Jabung Timur, Kab. Kerinci, Kab. Bungo, Kab. Tebo, Kab. Merangin, Kota Sungai Penuh","area":4},{"prov":"Kepulauan Bangka Belitung","kota":"Kab. Bangka Selatan, Kota Pangkal Pinang, Kab. Belitung, Kab. Belitung Timur","area":2},{"prov":"Kepulauan Bangka Belitung","kota":"Kab. Bangka, Kab. Bangka Tengah, Kab. Bangka Barat","area":3},{"prov":"Kepulauan Riau","kota":"Kota Batam","area":2},{"prov":"Kepulauan Riau","kota":"Kab. Karimun, Kab. Bintan, Kota Tanjung Pinang","area":3},{"prov":"Kepulauan Riau","kota":"Kab. Lingga, Kab. Kepulauan Anambas, Kab. Natuna","area":4},{"prov":"Lampung","kota":"Kab. Lampung Tengah, Kab. Pringsewu, Kota Metro, Kab. Pesawaran, Kab. Lampung Selatan, Kota Bandar Lampung","area":3},{"prov":"Lampung","kota":"Kab. Lampung Barat, Kab. Lampung Timur, Kab. Tulang Bawang Barat, Kab. Way Kanan, Kab. Tulang Bawang, Kab. Tanggamus, Kab. Pesisir Barat, Kab. Lampung Utara, Kab. Mesuji","area":4},{"prov":"Nanggroe Aceh Darussalam","kota":"Kab. Aceh Barat Daya, Kab. Aceh Besar, Kota Sabang, Kab. Gayo Lues","area":2},{"prov":"Nanggroe Aceh Darussalam","kota":"Kab. Aceh Jaya, Kab. Aceh Selatan, Kab. Aceh Tenggara, Kab. Nagan Raya, Kota Banda Aceh","area":3},{"prov":"Nanggroe Aceh Darussalam","kota":"Kab. Aceh Barat, Kab. Aceh Singkil, Kab. Aceh Tamiang, Kab. Aceh Tengah, Kota Subulussalam, Kab. Bener Meriah, Kab. Aceh Utara, Kota Lhokseumawe, Kab. Pidie, Kab. Aceh Timur, Kab. Simeulue, Kota Langsa, Kab. Bireuen, Kab. Pidie Jaya","area":4},{"prov":"Riau","kota":"Kota Pekanbaru","area":2},{"prov":"Riau","kota":"Kab. Kuantan Singingi, Kab. Pelalawan, Kab. Kampar, Kab. Siak, Kota Dumai, Kab. Rokan Hilir, Kab. Indragiri Hulu, Kab. Kepulauan Meranti, Kab. Bengkalis","area":3},{"prov":"Riau","kota":"Kab. Rokan Hulu, Kab. Indragiri Hilir","area":4},{"prov":"Sumatera Barat","kota":"Kab. Kepulauan Mentawai","area":2},{"prov":"Sumatera Barat","kota":"Kota Payakumbuh, Kota Padang Panjang, Kab. Sijunjung, Kab. Padang Pariaman, Kota Padang, Kab. Solok Selatan","area":3},{"prov":"Sumatera Barat","kota":"Kab. Pasaman Barat, Kab. Pasaman, Kab. Lima Puluh Kota, Kab. Tanah Datar, Kab. Dharmasraya, Kota Solok, Kab. Agam, Kab. Solok, Kota Bukittinggi, Kota Pariaman, Kota Sawahlunto, Kab. Pesisir Selatan","area":4},{"prov":"Sumatera Selatan","kota":"Kab. Ogan Komering Ilir, Kab. Penukal Abab Lematang Ilir, Kab. Banyuasin, Kota Palembang, Kab. Ogan Ilir","area":3},{"prov":"Sumatera Selatan","kota":"Kab. Ogan Komering Ulu Timur, Kab. Ogan Komering Ulu Selatan, Kab. Ogan Komering Ulu, Kab. Musi Rawas, Kab. Musi Rawas Utara, Kab. Empat Lawang, Kota Pagar Alam, Kota Lubuk Linggau, Kab. Musi Banyuasin, Kab. Muara Enim, Kab. Lahat, Kota Prabumulih","area":4},{"prov":"Sumatera Utara","kota":"Kab. Karo, Kota Medan, Kab. Dairi","area":2},{"prov":"Sumatera Utara","kota":"Kota Binjai, Kota Tebing Tinggi, Kab. Serdang Bedagai, Kab. Langkat, Kab. Deli Serdang, Kab. Batu Bara, Kota Tanjung Balai, Kab. Asahan, Kota Gunungsitoli, Kab. Nias Barat, Kab. Nias Selatan, Kab. Nias Utara","area":3},{"prov":"Sumatera Utara","kota":"Kab. Pakpak Bharat, Kab. Mandailing Natal, Kab. Padang Lawas, Kab. Labuhanbatu Utara, Kota Padangsidimpuan, Kab. Tapanuli Selatan, Kab. Labuhanbatu Selatan, Kab. Labuhanbatu, Kab. Tapanuli Utara, Kab. Padang Lawas Utara, Kab. Humbang Hasundutan, Kab. Simalungun, Kab. Toba Samosir, Kota Pematangsiantar, Kab. Tapanuli Tengah, Kab. Samosir, Kota Sibolga, Kab. Nias","area":4},{"prov":"Kalimantan Barat","kota":"Kab. Sekadau, Kab. Kapuas Hulu, Kab. Sintang, Kab. Bengkayang, Kab. Melawi, Kab. Sambas, Kab. Sanggau, Kab. Kubu Raya, Kota Pontianak, Kab. Kayong Utara, Kab. Landak, Kab. Mempawah, Kota Singkawang, Kab. Ketapang","area":4},{"prov":"Kalimantan Selatan","kota":"Kab. Hulu Sungai Tengah, Kab. Tapin, Kab. Hulu Sungai Utara, Kab. Tabalong, Kota Banjarmasin, Kab. Banjar, Kab. Tanah Bumbu, Kota Banjarbaru, Kab. Hulu Sungai Selatan","area":2},{"prov":"Kalimantan Selatan","kota":"Kab. Balangan, Kab. Barito Kuala, Kab. Tanah Laut, Kab. Kotabaru","area":3},{"prov":"Kalimantan Tengah","kota":"Kab. Kapuas, Kab. Pulang Pisau, Kota Palangkaraya","area":3},{"prov":"Kalimantan Tengah","kota":"Kab. Seruyan, Kab. Kotaringin Barat, Kab. Katingan, Kab. Kotawaringin Timur, Kab. Sukamara, Kab. Lamandau, Kab. Murung Raya, Kab. Barito Timur, Kab. Barito Utara, Kab. Barito Selatan, Kab. Gunung Mas","area":4}, {"prov":"Kalimantan Timur","kota":"Kab. Penajam Paser Utara, Kota Balikpapan, Kab. Paser, Kab. Kutai Kartanegara, Kota Samarinda, Kota Bontang, Kab. Berau, Kab. Kutai Timur, Kab. Kutai Barat, Kab. Mahakam Ulu","area":4},{"prov":"Kalimantan Utara","kota":"Kab. Tana Tidung, Kab. Malinau, Kab. Bulungan, Kota Tarakan, Kab. Nunukan","area":4},{"prov":"Gorontalo","kota":"Kab. Pahuwato, Kab. Boalemo, Kab. Gorontalo, Kota Gorontalo, Kab. Gorontalo Utara, Kab. Bone Bolango","area":4},{"prov":"Sulawesi Barat","kota":"Kab. Mamuju Tengah","area":2},{"prov":"Sulawesi Barat","kota":"Kab. Majene, Kab. Polewali Mandar, Kab. Mamuju Utara","area":3},{"prov":"Sulawesi Barat","kota":"Kab. Mamuju, Kab. Mamasa","area":4},{"prov":"Sulawesi Selatan","kota":"Kab. Barru, Kota Pare Pare, Kab. Pinrang","area":2},{"prov":"Sulawesi Selatan","kota":"Kab. Sinjai, Kab. Enrekang, Kab. Sidenreng Rappang, Kab. Luwu Timur, Kab. Soppeng, Kab. Tana Toraja","area":3},{"prov":"Sulawesi Selatan","kota":"Kab. Kepulauan Selayar, Kab. Takalar, Kab. Jeneponto, Kab. Bulukumba, Kab. Pangkajene Kepulauan, Kota Makassar, Kab. Gowa, Kab. Maros, Kab. Bone, Kab. Wajo, Kab. Luwu, Kab. Luwu Utara, Kota Palopo, Kab. Toraja Utara","area":4},{"prov":"Sulawesi Tengah","kota":"Kab. Banggai Kepulauan, Kab. Banggai Laut, Kota Palu, Kab. Toli Toli, Kab. Tojo Una Una, Kab. Morowali, Kab. Morowali Utara","area":3},{"prov":"Sulawesi Tengah","kota":"Kab. Banggai, Kab. Parigi Moutong, Kab. Donggala, Kab. Sigi, Kab. Poso, Kab. Buol","area":4},{"prov":"Sulawesi Tenggara","kota":"Kab. Konawe Kepulauan, Kab. Konawe Utara, Kab. Buton Utara, Kab. Wakatobi","area":2},{"prov":"Sulawesi Tenggara","kota":"Kota Bau Bau, Kab. Muna, Kab. Buton Selatan, Kab. Buton Tengah, Kab. Muna Barat","area":3},{"prov":"Sulawesi Tenggara","kota":"Kab. Kolaka, Kab. Kolaka Utara, Kab. Konawe, Kab. Konawe Selatan, Kota Kendari, Kab. Kolaka Timur, Kab. Buton, Kab. Bombana","area":4},{"prov":"Sulawesi Utara","kota":"Kab. Bolaang Mongondow, Kab. Bolaang Mongondow Selatan, Kota Kotamobagu, Kab. Minahasa Selatan, Kab. Bolaang Mongondow Timur, Kab. Minahasa Tenggara, Kab. Bolaang Mongondow Utara, Kota Tomohon, Kab. Minahasa, Kota Manado, Kab. Minahasa Utara, Kota Bitung, Kab. Kepulauan Sangihe, Kab. Kepulauan Talaud, Kab. Siau Tagulandang Biaro","area":4},{"prov":"Bali","kota":"Kab. Jembrana, Kab. Buleleng","area":1},{"prov":"Bali","kota":"Kab. Badung, Kab. Karangasem, Kab. Tabanan, Kab. Bangli, Kab. Gianyar, Kab. Klungkung, Kota Denpasar","area":2},{"prov":"Nusa Tenggara Barat","kota":"Kab. Lombok Barat, Kab. Lombok Timur, Kota Mataram, Kab. Lombok Tengah, Kab. Lombok Utara, Kab. Sumbawa Barat, Kab. Sumbawa, Kota Bima, Kab. Dompu","area":2},{"prov":"Nusa Tenggara Barat","kota":"Kab. Bima","area":4},{"prov":"Nusa Tenggara Timur","kota":"Kab. Alor, Kota Kupang, Kab. Kupang, Kab. Malaka, Kab. Manggarai Barat, Kab. Timor Tengah Selatan, Kab. Belu, Kab. Sikka, Kab. Timor Tengah Utara, Kab. Lembata, Kab. Manggarai Timur, Kab. Ende, Kab. Sumba Barat Daya, Kab. Rote Ndao, Kab. Nagekeo, Kab. Flores Timur, Kab. Ngada, Kab. Sumba Tengah, Kab. Manggarai, Kab. Sumba Barat, Kab. Sumba Timur, Kab. Sabu Raijua","area":4},{"prov":"Maluku","kota":"Kab. Maluku Tenggara Barat, Kab. Kepulauan Aru, Kota Tual, Kab. Seram Bagian Barat, Kab. Maluku Tengah, Kab. Seram Bagian Timur, Kota Ambon, Kab. Maluku Tenggara, Kab. Maluku Barat Daya, Kab. Buru Selatan, Kab. Buru","area":1},{"prov":"Maluku Utara","kota":"Kab. Halmahera Barat, Kab. Halmahera Utara, Kab. Kepulauan Sula, Kab. Halmahera Timur, Kab. Pulau Taliabu, Kab. Halmahera Selatan, Kota Tidore Kepulauan, Kota Ternate, Kab. Halmahera Tengah, Kab. Pulau Morotai","area":1},{"prov":"Papua","kota":"Kab. Asmat, Kab. Jayapura, Kab. Mimika, Kab. Keerom, Kab. Biak Numfor, Kota Jayapura, Kab. Kepulauan Yapen, Kab. Boven Digoel, Kab. Merauke, Kab. Deiyai, Kab. Dogiyai, Kab. Intan Jaya, Kab. Jayawijaya, Kab. Lanny Jaya, Kab. Mamberamo Raya, Kab. Mamberamo Tengah, Kab. Mappi, Kab. Nabire, Kab. Nduga, Kab. Paniai, Kab. Pegunungan Bintang, Kab. Puncak, Kab. Puncak Jaya, Kab. Sarmi, Kab. Supiori, Kab. Tolikara, Kab. Waropen, Kab. Yahukimo, Kab. Yalimo","area":1},{"prov":"Papua Barat","kota":"Kab. Teluk Bintuni, Kab. Sorong Selatan, Kab. Sorong, Kab. Teluk Wondama, Kota Sorong, Kab. Manokwari, Kab. Fak Fak, Kab. Kaimana, Kab. Manokwari Selatan, Kab. Maybrat, Kab. Pegunungan Arfak, Kab. Raja Ampat, Kab. Tambrauw","area":1}];
        
        const areaDataFlat = [];
        areaDataRaw.forEach(provData => {
            const cities = provData.kota.split(', ');
            cities.forEach(city => {
                areaDataFlat.push({
                    prov: provData.prov,
                    kota: city,
                    area: provData.area
                });
            });
        });

        const areaTableBody = document.querySelector('#areaDataTable tbody');
        const areaSearchInput = document.getElementById('areaSearchInput');

        areaDataFlat.forEach(item => {
            const row = areaTableBody.insertRow();
            row.innerHTML = `<td>${item.prov}</td><td>${item.kota}</td><td>${item.area}</td>`;
        });
        
        function searchArea() {
            const filter = areaSearchInput.value.toLowerCase();
            const rows = areaTableBody.getElementsByTagName('tr');
            for (let row of rows) {
                const cells = row.getElementsByTagName('td');
                if (cells.length > 0) {
                    let rowText = Array.from(cells).map(cell => cell.textContent.toLowerCase()).join(' ');
                    row.style.display = rowText.includes(filter) ? "" : "none";
                    
                    Array.from(cells).forEach(cell => {
                        cell.innerHTML = cell.textContent;
                        if (filter) {
                            const regex = new RegExp(filter, 'gi');
                            cell.innerHTML = cell.textContent.replace(regex, match => `<span class="highlight">${match}</span>`);
                        }
                    });
                }
            }
        }

        areaSearchInput.addEventListener('keyup', searchArea);
        areaSearchInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                searchArea();
                areaSearchInput.blur();
            }
        });
    </script>
</body>
</html>
